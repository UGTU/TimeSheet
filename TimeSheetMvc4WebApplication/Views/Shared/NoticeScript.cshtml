<script src="~/Scripts/jquery.signalR-2.0.1.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<!--SignalR script to update the chat page and send messages.-->

<script>
    $(function () {
        // Reference the auto-generated proxy for the hub.
        var chat = $.connection.noticeHub;
        // Create a function that the hub can call back to display messages.
        chat.client.addNoticeToPage = function (message) {
            // Add the message to the page.
            var r = '<div class=\"alert alert-replaceType fade in\">' +
                '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">×</button>' +
                '<strong>' + ((message.title) ? (message.title + "<br/>") : "") + '</strong>' + message.message + '</div>';
            r = r.replace('replaceType', message.type);
            $('#noticePool').append(r);
            $('.alert').last().delay(30000).hide('slow');
        };
        // Start the connection.
        $.connection.hub.start().done(function () {
            chat.server.test(null);
            console.log("test call");
        });
    });

    // This optional function html-encodes messages for display in the page.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>
